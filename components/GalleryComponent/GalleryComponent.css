/* =============================================================== */
/* FILE: /components/GalleryComponent/GalleryComponent.css         */
/* VERSION: 7.1.0 (Layout Fix for Grid Scrolling)                  */
/* =============================================================== */
@import url('/themes/dark-theme.css');

/* --- Wrapper --- */
.gallery-component-wrapper {
    display: flex; height: 100%; width: 100%;
    background-color: var(--color-background-page); color: var(--color-text-primary);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    overflow: hidden;
}

/* --- Integrated Folder Panel --- */
.side-panel {
    width: 250px; flex-shrink: 0; background-color: var(--color-background-component);
    border-right: 1px solid var(--color-border); display: flex; flex-direction: column;
    padding: 1rem; box-sizing: border-box; transition: margin-left 0.3s ease-in-out;
}
.gallery-component-wrapper.gc-panel-collapsed .side-panel { margin-left: -250px; }
.panel-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--color-border); padding-bottom: 0.75rem; margin-bottom: 1rem; flex-shrink: 0; }
.panel-header h2 { margin: 0; font-size: 1.2rem; }

/* --- New Panel Actions Menu --- */
.panel-actions-menu-container { position: relative; }
.panel-actions-btn { background: none; border: none; color: var(--color-text-secondary); font-size: 1.2rem; cursor: pointer; padding: 0.5rem; border-radius: 50%; }
.panel-actions-btn:hover { background-color: var(--color-background-inset); color: var(--color-text-primary); }
.panel-actions-menu {
    position: absolute; top: 100%; right: 0; background-color: var(--color-background-inset);
    border: 1px solid var(--color-border); border-radius: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 10; min-width: 180px; padding: 0.5rem;
}
.panel-menu-item { display: block; width: 100%; text-align: left; background: none; border: none; color: var(--color-text-primary); padding: 0.75rem 1rem; border-radius: 4px; cursor: pointer; }
.panel-menu-item:hover { background-color: var(--color-button-primary-bg); }

.panel-content { flex-grow: 1; overflow-y: auto; } /* This is the container for the NavigationListComponent */

/* --- Main Content & Grid --- */
.gallery-main-content { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
.gallery-toolbar-container {
    flex-shrink: 0; /* Prevent the toolbar from shrinking */
}
.gallery-grid-container {
    flex-grow: 1; /* Allow the grid container to take all remaining vertical space */
    position: relative; /* Needed for the grid component's internal layout */
}

/* Non-destructive loading overlay */
.gallery-loading-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--color-background-overlay, rgba(0,0,0,0.5));
    display: none; /* Hidden by default */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 10;
    gap: 1rem;
}

.item-state-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5);
    display: none; align-items: center; justify-content: center;
    z-index: 5;
}
/* These classes are now applied to .grid-item by ItemGridComponent, but the overlay is part of GalleryComponent's item template */
.gallery-item.error .item-state-overlay,
.gallery-item.is-pending .item-state-overlay { display: flex; }

.gallery-item .spinner, .gallery-item .error-icon, .gallery-item .progress-overlay { display: none; }

/* ===================== THE FIX ===================== */
/* By default, a pending item shows a spinner. The JS will hide this and show the progress bar on the first update. */
.gallery-item.is-pending .spinner { display: block; }
/* =================================================== */

.gallery-item.pending-action .spinner { display: block; }
.gallery-item.error .error-icon { display: block; color: var(--color-button-danger-bg); font-size: 2rem; }

.gallery-item.pending-action .item-thumb,
.gallery-item.error .item-thumb { 
    filter: blur(2px) brightness(0.7); 
}
.item-fade-out { animation: fadeOut 0.4s ease forwards; }

/* --- Notifications --- */
.gallery-notification-container { position: absolute; bottom: 20px; right: 20px; z-index: 200; display: flex; flex-direction: column; gap: 10px; }
.gallery-toast {
    padding: 12px 20px; border-radius: 5px; color: white;
    background-color: var(--color-button-info-bg);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    opacity: 1;
}
.gallery-toast.toast-fade-out {
    animation: toastFadeOut 0.4s ease forwards;
}
.gallery-toast.success { background-color: var(--color-button-success-bg); }
.gallery-toast.error { background-color: var(--color-button-danger-bg); }

/* --- General & Helper Classes --- */
.gc-btn { padding: 0.5rem 1rem; font-size: 0.9rem; border-radius: 5px; cursor: pointer; font-weight: bold; border: 1px solid transparent; background-color: var(--color-button-primary-bg); color: white; transition: background-color 0.2s, border-color 0.2s; }
.gc-btn:hover { background-color: #45a8e6; }
.gc-btn-secondary { background-color: var(--color-button-secondary-bg); border-color: var(--color-border); }
.gc-btn-secondary:hover { background-color: #555; }
.gc-btn-danger { background-color: var(--color-button-danger-bg); }
.gc-btn-danger:hover { background-color: #f87c6c; }
.gc-btn-icon { background: none; border: none; padding: 0.5rem; color: #eee; font-size: 1rem; }
.gallery-placeholder { grid-column: 1 / -1; text-align: center; color: var(--color-text-secondary); }
.spinner { border: 4px solid #555; border-top: 4px solid var(--color-button-primary-bg); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes toastFadeOut { from { opacity: 1; } to { opacity: 0; } }
@keyframes fadeOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.9); } }

/* --- Preview Modal Styles --- */
.preview-media-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 40vh; /* Ensure a minimum height for the container */
}

.preview-media-container img,
.preview-media-container video {
    max-width: 100%;
    max-height: 75vh; /* Constrain media to viewport height, leaving room for modal chrome */
    object-fit: contain; /* This is the key property to preserve aspect ratio */
    border-radius: 4px;
}
