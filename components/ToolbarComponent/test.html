<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToolbarComponent Overflow Test</title>
    <link rel="stylesheet" href="/themes/dark-theme.css">
    <style>
        body, html {
            margin: 0; padding: 2rem;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--color-background-page);
            color: var(--color-text-primary);
        }
        .resizable-wrapper {
            width: 80%;
            min-width: 300px;
            max-width: 100%;
            border: 2px dashed var(--color-border);
            padding: 1rem;
            resize: horizontal;
            overflow: auto;
            margin-bottom: 2rem;
        }
        #toolbar-container {
            /* The component will style this container */
        }
        #log {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--color-background-inset, #222);
            border-radius: 5px;
            border: 1px solid var(--color-border, #444);
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            color: var(--color-text-log, #0f0);
        }
    </style>
</head>
<body>

    <h1>ToolbarComponent Overflow Test</h1>
    <p>Resize the dashed container below to see the overflow menu appear.</p>

    <div class="resizable-wrapper">
        <div id="toolbar-container"></div>
    </div>

    <h2>Event Log:</h2>
    <div id="log"></div>

    <script type="module">
        import ToolbarComponent from './ToolbarComponent.js';

        document.addEventListener('DOMContentLoaded', () => {
            const logEl = document.getElementById('log');
            function log(message) {
                logEl.innerHTML += `> ${message}\n`;
                logEl.scrollTop = logEl.scrollHeight;
            }

            // --- A large set of items to force overflow ---
            const mockItems = [
                { type: 'button', id: 'action-1', label: 'Action 1', icon: '✔️' },
                { type: 'button', id: 'action-2', label: 'Action 2', icon: '✏️' },
                { type: 'button', id: 'action-3', label: 'Action 3', icon: '🗑️' },
                { type: 'separator' },
                { type: 'button', id: 'action-4', label: 'Another Action', icon: '⚙️' },
                { type: 'button', id: 'action-5', label: 'A Fifth Action', icon: '📄' },
                { type: 'button', id: 'action-6', label: 'And Another', icon: '🔗' },
                { type: 'button', id: 'action-7', label: 'One More', icon: '🔄' },
                { type: 'separator' },
                { type: 'button', id: 'action-8', label: 'Final Action', icon: '➡️' },
                { type: 'button', id: 'action-9', label: 'Disabled', icon: '🚫', disabled: true },
            ];

            // --- Component Initialization ---
            const toolbarContainer = document.getElementById('toolbar-container');
            const toolbar = new ToolbarComponent(toolbarContainer);
            toolbar.setItems(mockItems);

            // --- Event Listener for the Toolbar ---
            toolbarContainer.addEventListener('buttonClick', (e) => {
                log(`EVENT (buttonClick): actionId: "${e.detail.actionId}"`);
            });

            log('Toolbar initialized with a large set of items.');
        });
    </script>

</body>
</html>